version: '3.1'
session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true

intents:
  - start
  - greet
  - goodbye
  - affirm
  - deny
  - mood_great
  - mood_unhappy
  - bot_challenge
  - functions_available
  - districts_available
  - difficulties_available
  - i_want_to_hike
  - recommend_hiking_route
  - check_weather
  - where_to_hike
  - easy_hard_hike
  - hiking_trails_search
  - thank_you
  - hiking_info
  - trails_search_by_districts
  - trails_search_by_lev
  - hiking_caution

entities:
  - weather
  - choice
  - selected_district
  - difficulty
  - forecast
  - recommend
  - hiking_route
  - hike
  - easyhard
  - safety_caution
  - HK
  - districts
  - lev
  - prepare

slots:
  choice:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: choice
  
  selected_district:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: selected_district

  difficulty:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: difficulty

  hike:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: hike

forms:
  choice_form:
    required_slots:
      - choice
  
  district_form:
    # ignored_intents:
    #   - choice
    required_slots:
      - district
  
  difficulty_form:
    # ignored_intents:
    #   - choice
    required_slots:
      - difficulty
  
  hiking_form:
    # ignored_intents:
    #   - choice
    required_slots:
      - hike

responses:
  utter_welcome:
  - text: 你好，我係小山 Hilly，係一個推介行山路線嘅 Chatbot。

  utter_cheer_up:
  - text: '希望呢張圖片氹到你開心:'
    image: https://i.imgur.com/nGF1K8f.jpg

  utter_did_that_help:
  - text: 咁樣幫唔幫到你?

  utter_happy:
  - text: 好 Have a nice day

  utter_goodbye:
  - text: '多謝使用 Hilly, byebye'

  utter_thankyou:
  - text: '多謝使用 Hilly'

  utter_iamabot:
  - text: '我係一個由 Rasa 驅動嘅聊天機械人 :robot:'

  utter_top_menu:
  - text: "我可以推供行山資訊，請選擇："
    buttons:
      - title: "行山徑查詢"
        payload: '/hiking_trails_search{{"choice":"行山徑"}}'
      - title: "行山相開資訊"
        payload: '/hiking_info{{"choice":"資訊"}}'

  utter_trails_search_menu:
  - text: "查詢行山徑可以："
    buttons:
      - title: "依照地區推介"
        payload: '/trails_search_by_districts{{"districts":"地區"}}'
      - title: "依照難度推介"
        payload: '/trails_search_by_lev{{"lev":"程度"}}'

  utter_hiking_info_menu:
  - text: "我可以提供以下行山資訊"
    buttons:
      - title: "行山安全需知"
        payload: '/hiking_caution'
      - title: "行山前準備"
        payload: '/hiking_caution'
      - title: "常見意外"
        payload: '/common_accidents'
  
  utter_ask_district:
  - text: "請選擇地區:\n1)新界北區\n2)港島區\n3)西貢區\n4)新界西區\n5)大嶼山區"
    buttons:
      - title: "新界北區"
        payload: '/districts_available{{"selected_district":"新界北區"}}'
      - title: "港島區"
        payload: '/districts_available{{"selected_district":"港島區"}}'
      - title: "西貢區"
        payload: '/districts_available{{"selected_district":"西貢區"}}'
      - title: "新界西區"
        payload: '/districts_available{{"selected_district":"新界西區"}}'
      - title: "大嶼山區"
        payload: '/districts_available{{"selected_district":"大嶼山區"}}'

  utter_do_you_want_to_see_other_difficulties:
  - text: 睇唔睇埋其他難度行山徑?
    buttons: 
      - title: "好"
        payload: '/affirm'
      - title: "唔使"
        payload: '/deny'

  utter_ask_difficulties:
  - text: 請輸入難度，1 最易，5最難
    buttons:
      - title: "1" 
        payload: '/difficulties_available{{"difficulty":"1"}}'
      - title: "2"
        payload: '/difficulties_available{{"difficulty":"2"}}'
      - title: "3"
        payload: '/difficulties_available{{"difficulty":"3"}}'
      - title: "4"
        payload: '/difficulties_available{{"difficulty":"4"}}'
      - title: "5"
        payload: '/difficulties_available{{"difficulty":"5"}}'

  utter_say_user_chose: 
  - condition:
    - type: slot
      name: choice
      value: "地區"
    text: "請選擇地區:\n1)新界北區\n2)港島區\n3)西貢區\n4)新界西區\n5)大嶼山區"
    buttons:
      - title: "新界北區"
        payload: '/districts_available{{"district":"新界北區"}}'
      - title: "港島區"
        payload: '/districts_available{{"district":"港島區"}}'
      - title: "西貢區"
        payload: '/districts_available{{"district":"西貢區"}}'
      - title: "新界西區"
        payload: '/districts_available{{"district":"新界西區"}}'
      - title: "大嶼山區"
        payload: '/districts_available{{"district":"大嶼山區"}}'
  - condition:
    - type: slot
      name: choice
      value: "難度"
    text: 請輸入難度，1 最易，5最難
    buttons:
      - title: "1" 
        payload: '/difficulties_available{{"difficulty":"難度1"}}'
      - title: "2"
        payload: '/difficulties_available{{"difficulty":"難度2"}}'
      - title: "3"
        payload: '/difficulties_available{{"difficulty":"難度3"}}'
      - title: "4"
        payload: '/difficulties_available{{"difficulty":"難度4"}}'
      - title: "5"
        payload: '/difficulties_available{{"difficulty":"難度5"}}'

  utter_hiking_caution:
  - text: "遠足安全守則\n
      1. 出發前應注意天氣情況，尤其要留意是否會有雷暴、風雨或氣溫驟降等情況；\n
      2. 應清楚了解將行經的地區，留意警署，郊野公園管理站及求救電話的位置；\n
      3. 留意火災危險警告訊號，如果當日天氣乾燥，切勿隨便生火；\n
      4. 必須穿著適當的衣物及行山鞋，並帶備太陽帽及行山手杖；\n
      5. 應攜帶以下物品：地圖、指南針、急救藥品、電筒、哨子、紙筆、禦寒衣物、雨具、後備食糧、充足的食水，以及通訊器材如流動電話；\n
      6. 為方便行走和攀山，請將第5項所述的物品妥善地放在背囊內；\n
      7. 應結伴同行，確保同行者中有具備遠足經驗及急救知識的人士；\n
      8. 如在山野間迷途，應選擇原路折返，切勿強行前進；\n
      9. 旅程中如遇上意外，應盡快尋求協助。\n
      來源：香港攀山協會 遠足及露營活動安全指引 http://www.hkma.net/mountain_safety.html\n
      其他相關網頁:\n
      1. 漁護署 郊野公園遠足安全指引 https://www.afcd.gov.hk/tc_chi/country/cou_vis/cou_vis_gac/cou_wha_whe_sat.html\n
      2. 民安隊 遠足活動安全須知 https://www.cas.gov.hk/chi/safe/hikingsafety.html\n"

  utter_out_of_scope:
  - text: "對唔住，我處理唔到你啲要求"

actions:
  - action_district_query
  - action_difficulty_query
  - action_inquire_weather
  - action_say_district_chosen
  - action_say_function_chosen
  - action_reset_all_slots
  - utter_say_user_chose
  - utter_ask_district
