version: '3.0'
session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true

intents:
  - start
  - greet
  - goodbye
  - affirm
  - deny
  - mood_great
  - mood_unhappy
  - bot_challenge
  - functions_available
  - districts_available
  - difficulties_available
  - i_want_to_hike
  - recommend_hiking_route
  - check_weather
  - where_to_hike
  - easy_hard_hike

entities:
  - weather
  - choice
  - district
  - difficulty
  - forecast
  - recommend
  - hiking_route
  - hike
  - easyhard

slots:
  choice:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: choice
  
  district:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: district

  difficulty:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: difficulty

  hike:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: hike

forms:
  choice_form:
    ignored_intents:
      - difficulty
      - district
    required_slots:
      - choice
  
  district_form:
    ignored_intents:
      - choice
    required_slots:
      - district
  
  difficulty_form:
    ignored_intents:
      - choice
    required_slots:
      - difficulty
  
  hiking_form:
    ignored_intents:
      - choice
    required_slots:
      - hike

responses:
  utter_welcome:
  - text: 你好，我係小山 Hilly，係一個推介行山路線嘅 Chatbot。

  utter_cheer_up:
  - text: '希望呢張圖片氹到你開心:'
    image: https://i.imgur.com/nGF1K8f.jpg

  utter_did_that_help:
  - text: 咁樣幫唔幫到你?

  utter_happy:
  - text: 好 Have a nice day

  utter_goodbye:
  - text: '多謝使用 Hilly, byebye'

  utter_thankyou:
  - text: '多謝使用 Hilly'

  utter_iamabot:
  - text: '我係一個由 Rasa 驅動嘅聊天機械人 :robot:'

  utter_list_functions:
  - text: "我可以推介行山路線，請選擇："
    buttons:
      - title: "依照地區推介"
        payload: '/functions_available{{"choice":"地區"}}'
      - title: "依照難度推介"
        payload: '/functions_available{{"choice":"難度"}}'
  
  utter_ask_district:
  - text: "請選擇地區:\n1)新界北區\n2)港島區\n3)西貢區\n4)新界西區\n5)大嶼山區"
    buttons:
      - title: "新界北區"
        payload: '/districts_available{{"district":"新界北區"}}'
      - title: "港島區"
        payload: '/districts_available{{"district":"港島區"}}'
      - title: "西貢區"
        payload: '/districts_available{{"district":"西貢區"}}'
      - title: "新界西區"
        payload: '/districts_available{{"district":"新界西區"}}'
      - title: "大嶼山區"
        payload: '/districts_available{{"district":"大嶼山區"}}'

  utter_do_you_want_to_see_other_difficulties:
  - text: 睇唔睇埋其他難度行山徑?
    buttons: 
      - title: "好"
        payload: '/affirm'
      - title: "唔使"
        payload: '/deny'

  utter_ask_difficulties:
  - text: 請輸入難度，1 最易，5最難
    buttons:
      - title: "1" 
        payload: '/difficulties_available{{"difficulty":"1"}}'
      - title: "2"
        payload: '/difficulties_available{{"difficulty":"2"}}'
      - title: "3"
        payload: '/difficulties_available{{"difficulty":"3"}}'
      - title: "4"
        payload: '/difficulties_available{{"difficulty":"4"}}'
      - title: "5"
        payload: '/difficulties_available{{"difficulty":"5"}}'

  utter_say_user_chose: 
  - condition:
    - type: slot
      name: choice
      value: "地區"
    text: "請選擇地區:\n1)新界北區\n2)港島區\n3)西貢區\n4)新界西區\n5)大嶼山區"
    buttons:
      - title: "新界北區"
        payload: '/districts_available{{"district":"新界北區"}}'
      - title: "港島區"
        payload: '/districts_available{{"district":"港島區"}}'
      - title: "西貢區"
        payload: '/districts_available{{"district":"西貢區"}}'
      - title: "新界西區"
        payload: '/districts_available{{"district":"新界西區"}}'
      - title: "大嶼山區"
        payload: '/districts_available{{"district":"大嶼山區"}}'
  - condition:
    - type: slot
      name: choice
      value: "難度"
    text: 請輸入難度，1 最易，5最難
    buttons:
      - title: "1" 
        payload: '/difficulties_available{{"difficulty":"難度1"}}'
      - title: "2"
        payload: '/difficulties_available{{"difficulty":"難度2"}}'
      - title: "3"
        payload: '/difficulties_available{{"difficulty":"難度3"}}'
      - title: "4"
        payload: '/difficulties_available{{"difficulty":"難度4"}}'
      - title: "5"
        payload: '/difficulties_available{{"difficulty":"難度5"}}'

  utter_out_of_scope:
  - text: "對唔住，我處理唔到你啲要求"

actions:
  - action_district_query
  - action_difficulty_query
  - action_inquire_weather
  - action_say_district_chosen
  - action_say_function_chosen
  - action_reset_all_slots
  - utter_say_user_chose
  - utter_ask_district