version: '3.1'
stories:
- story: greeting
  steps:
  - intent: greet
  - action: utter_welcome
  - action: utter_top_menu
  - checkpoint: greet_user

- story: btn_trails_by_districts
  steps:
  - checkpoint: greet_user
  - intent: hiking_trails_search
    entities:
    - choice: 行山徑
  - slot_was_set:
    - choice: 行山徑
  - action: utter_trails_search_menu
  - intent: trails_search_by_districts
    entities:
    - districts: 地區
  - action: utter_ask_district
  - intent: districts_available
    entities:
    - selected_district
  - slot_was_set:
    - selected_district 
  - action: action_district_query
  - action: action_reset_all_slots

- story: btn_trails_by_lev
  steps:
  - checkpoint: greet_user
  - intent: hiking_trails_search
    entities:
    - choice: 行山徑
  - slot_was_set:
    - choice: 行山徑
  - action: utter_trails_search_menu 
  - intent: trails_search_by_lev
    entities:
    - lev: 程度
  - action: utter_ask_difficulties 
  - intent: difficulties_available
    entities:
    - difficulty
  - slot_was_set:
    - difficulty
  - action: action_difficulty_query
  - action: action_reset_all_slots

- story: btn_safety_caution
  steps:
  - checkpoint: greet_user
  - intent: hiking_info
    entities:
    - choice: 資訊
  - slot_was_set:
    - choice: 資訊
  - action: utter_hiking_info_menu
  - intent: hiking_caution
  - action: utter_hiking_caution
  - action: action_reset_all_slots

- story: btn_checklist
  steps:
  - checkpoint: greet_user
  - intent: hiking_info
    entities:
    - choice: 資訊
  - slot_was_set:
    - choice: 資訊
  - action: utter_hiking_info_menu
  - intent: checklist
  - action: utter_checklist

- story: btn_common_accidents
  steps:
  - checkpoint: greet_user
  - intent: hiking_info
    entities:
    - choice: 資訊
  - slot_was_set:
    - choice: 資訊
  - action: utter_hiking_info_menu
  - intent: ask_accidents
    entities:
    - accident
  - action: utter_accident_list
  - intent: accidents_list
    entities:
      - accident_name
  - slot_was_set:
    - accident_name
  - action: action_accident_query

- story: trails_search_by_districts
  steps:
  - checkpoint: greet_user
  - intent: trails_search_by_districts
    entities:
    - districts: 地區
  - action: utter_ask_district
  - intent: districts_available
    entities:
    - selected_district
  - slot_was_set:
    - selected_district
  - action: action_district_query

- story: trails_search_by_lev
  steps:
  - checkpoint: greet_user
  - intent: trails_search_by_lev
    entities:
    - lev: 程度
  - action: utter_ask_difficulties
  - intent: difficulties_available
    entities:
    - difficulty
  - slot_was_set:
    - difficulty
  - action: action_difficulty_query

- story: hiking_caution_long
  steps:
    - checkpoint: greet_user
    - intent: hiking_info
      entities:
      - choice: 資訊
    - action: utter_hiking_info_menu
    - intent: hiking_caution
      entities:
      - safety_caution
    - action: utter_hiking_caution

- story: hiking_caution_short
  steps:
    - checkpoint: greet_user
    - intent: hiking_caution
      entities:
      - safety_caution
    - action: utter_hiking_caution

- story: checklist_long
  steps:
    - checkpoint: greet_user
    - intent: hiking_info
      entities:
      - choice: 資訊
    - action: utter_hiking_info_menu
    - intent: checklist
      entities:
      - prepare
    - action: utter_checklist

- story: checklist_short
  steps:
    - checkpoint: greet_user
    - intent: checklist
      entities:
      - prepare
    - action: utter_checklist

- story: accident_long
  steps:
    - checkpoint: greet_user
    - intent: hiking_info
      entities:
      - choice: 資訊
    - slot_was_set:
      - choice: 資訊
    - action: utter_hiking_info_menu
    - intent: ask_accidents
      entities:
      - accident
    - action: utter_accident_list
    - intent: accidents_list
      entities:
      - accident_name
    - slot_was_set:
      - accident_name
    - action: action_accident_query

- story: accident_short
  steps:
    - checkpoint: greet_user
    - intent: ask_accidents
      entities:
      - accident
    - action: utter_accident_list
    - intent: accidents_list
      entities:
      - accident_name
    - slot_was_set:
      - accident_name
    - action: action_accident_query

- story: convo_query_select_districts
  steps:
  - checkpoint: greet_user
  - intent: i_want_to_hike
    entities:
    - hike
  - action: utter_ask_district
  - intent: districts_available
    entities:
    - selected_district
  - slot_was_set:
    - selected_district
  - action: action_district_query

- story: conversation_where_to_hike
  steps:
  - checkpoint: greet_user
  - intent: where_to_hike
    entities:
    - hike
    - district
  - slot_was_set:
    - selected_district
  - action: action_district_query

- story: conversation_easyHard_to_hike (ask difficulty lev)
  steps:
  - checkpoint: greet_user
  - intent: easy_hard_hike
    entities:
    - hike
    - easyhard
  - action: utter_ask_difficulties
  - intent: difficulties_available
    entities:
    - difficulty
  - slot_was_set:
    - difficulty
  - action: action_difficulty_query

- story: check_weather
  steps:
    - intent: check_today_weather
    - action: action_inquire_weather

# - story: hiking_trails_search
#   steps:
#     - checkpoint: greet_user
#     - intent: hiking_trails_search
#       entities:
#       - choice: 行山徑
#     - checkpoint: trails_search

# - story: hiking_info
#   steps:
#     - checkpoint: greet_user
#     - intent: hiking_info
#       entities:
#       - choice: 資訊
#     - checkpoint: hiking_info

# - story: trails_search_by_districts
#   steps:
#     - checkpoint: trails_search
#     - intent: trails_search_by_districts
#       entities:
#       - districts: 地區
#     - action: utter_ask_district
#     - intent: districts_available
#       entities:
#       - selected_district
#     - slot_was_set:
#       - selected_district
#     - action: action_district_query
#     - checkpoint: story_complete

# - story: trails_search_by_lev
#   steps:
#     - checkpoint: trails_search
#     - action: utter_trails_search_menu
#     - intent: trails_search_by_lev
#       entities:
#       - lev: 程度
#     - action: utter_ask_difficulties
#     - intent: difficulties_available
#       entities:
#       - difficulty
#     - slot_was_set:
#       - difficulty
#     - action: action_difficulty_query
#     - checkpoint: story_complete

# - story: hiking_caution
#   steps:
#     - checkpoint: hiking_info
#     - action: utter_hiking_info_menu
#     - intent: hiking_caution
#     - action: utter_hiking_caution
#     - checkpoint: story_complete

# - story: option_1_districts
#   steps:
#   - checkpoint: greet_user
#   - intent: functions_available
#     entities:
#     - choice: 地區
#   - slot_was_set:
#     - choice: 地區
#   - action: utter_say_user_chose
#   - intent: districts_available
#     entities:
#     - district
#   - slot_was_set:
#     - district
#   - action: action_district_query
#   - checkpoint: story_complete

# - story: option_2_difficulty
#   steps:
#   - checkpoint: greet_user
#   - intent: functions_available
#     entities:
#     - choice: 難度
#   - slot_was_set:
#     - choice: 難度
#   - action: utter_say_user_chose
#   - intent: difficulties_available
#     entities:
#     - difficulty
#   - slot_was_set:
#     - difficulty
#   - action: action_difficulty_query
#   - checkpoint: story_complete

### change later
# - story: convo_query_select_districts
#   steps:
#   - checkpoint: greet_user
#   - intent: i_want_to_hike
#     entities:
#     - hike: gohike
#   - slot_was_set:
#     - hike: gohike
#   - action: utter_ask_district
#   - intent: districts_available
#     entities:
#     - district
#   - slot_was_set:
#     - district
#   - action: action_district_query
  # - checkpoint: story_complete

# - story: conversation_where_to_hike
#   steps:
#   - checkpoint: greet_user
#   - intent: where_to_hike
#     entities:
#     - hike
#     - district
#   - slot_was_set:
#     - selected_district
#   - slot_was_set:
#     - hike
#   - action: action_district_query
  # - checkpoint: story_complete

# - story: conversation_easyHard_to_hike (easiest)
#   steps:
#   - checkpoint: greet_user
#   - intent: easy_hard_hike
#     entities:
#     - hike
#     - difficulty: 1
#   - action: action_difficulty_query
#   - checkpoint: query_done

# - story: want_to_see_other_difficulty
#   steps:
#   - checkpoint: query_done
#   - action: utter_do_you_want_to_see_other_difficulties
#   - intent: affirm
#   - action: utter_ask_difficulties
#   - intent: difficulties_available
#     entities:
#     - difficulty
#   - action: action_difficulty_query
  # - checkpoint: story_complete

# - story: DON'T_want_to_see_other_difficulty
#   steps:
#   - checkpoint: query_done
#   - action: utter_do_you_want_to_see_other_difficulties
#   - intent: deny
  # - checkpoint: story_complete

# - story: conversation_easyHard_to_hike (ask difficulty lev)
#   steps:
#   - checkpoint: greet_user
#   - intent: easy_hard_hike
#     entities:
#     - hike: gohike
#     - easyhard
#   - action: utter_ask_difficulties
#   - intent: difficulties_available
#     entities:
#     - difficulty
#   - action: action_difficulty_query
  # - checkpoint: story_complete

# - story: 天氣
#   steps:
#   - checkpoint: greet_user
#   - intent: check_weather
#     entities:
#     - weather: 天氣
#   - action: action_inquire_weather
  # - checkpoint: story_complete

# - story: loop_again
#   steps:
#   - checkpoint: story_complete
#   - action: utter_top_menu
#   - intent: functions_available
#   - active_loop: choice_form
