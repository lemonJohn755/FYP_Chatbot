version: '3.1'

stories:
- story: greet_flow
  steps:
  - intent: greet
  - action: utter_welcome
  - action: utter_list_functions
  - checkpoint: greet_user

- story: option_1_districts
  steps:
  - checkpoint: greet_user
  - intent: functions_available
    entities:
    - choice: 地區
  - slot_was_set:
    - choice: 地區
  - action: utter_say_user_chose
  - intent: districts_available
    entities:
    - district
  - slot_was_set:
    - district
  - action: action_district_query
  - checkpoint: story_complete

- story: option_2_difficulty
  steps:
  - checkpoint: greet_user
  - intent: functions_available
    entities:
    - choice: 難度
  - slot_was_set:
    - choice: 難度
  - action: utter_say_user_chose
  - intent: difficulties_available
    entities:
    - difficulty
  - slot_was_set:
    - difficulty
  - action: action_difficulty_query
  - checkpoint: story_complete

- story: conversation_query_select_districts
  steps:
  - checkpoint: greet_user
  - intent: i_want_to_hike
    entities:
    - hike: gohike
  - slot_was_set:
    - hike: gohike
  - action: utter_ask_district
  - intent: districts_available
    entities:
    - district
  - slot_was_set:
    - district
  - action: action_district_query
  - checkpoint: story_complete

- story: conversation_where_to_hike
  steps:
  - checkpoint: greet_user
  - intent: where_to_hike
    entities:
    - hike: gohike
    - district
  - slot_was_set:
    - district
  - slot_was_set:
    - hike: gohike
  - action: action_district_query
  - checkpoint: story_complete

- story: conversation_easyHard_to_hike (easiest)
  steps:
  - checkpoint: greet_user
  - intent: easy_hard_hike
    entities:
    - hike: gohike
    - difficulty: 1
  - action: action_difficulty_query
  - checkpoint: story_complete

- story: conversation_easyHard_to_hike (ask difficulty lev)
  steps:
  - checkpoint: greet_user
  - intent: easy_hard_hike
    entities:
    - hike: gohike
    - easyhard
  - action: utter_ask_difficulties
  - intent: difficulties_available
    entities:
    - difficulty
  - action: action_difficulty_query
  - checkpoint: story_complete

- story: 天氣
  steps:
  - checkpoint: greet_user
  - intent: check_weather
    entities:
    - weather: 天氣
  - action: action_inquire_weather
  - checkpoint: story_complete

- story: loop_again
  steps:
  - checkpoint: story_complete
  - action: action_reset_all_slots
  - action: utter_list_functions
  - intent: functions_available
  - active_loop: choice_form